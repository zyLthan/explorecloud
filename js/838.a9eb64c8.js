(self["webpackChunkshopping_app"]=self["webpackChunkshopping_app"]||[]).push([[838],{2838:function(t,a,e){"use strict";e.r(a),e.d(a,{default:function(){return g}});var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"order"},[a("van-nav-bar",{attrs:{title:"我的订单","left-arrow":""},on:{"click-left":function(a){return t.$router.back()}}}),a("van-tabs",{attrs:{sticky:""},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[a("van-tab",{attrs:{name:"all",title:"全部"}}),a("van-tab",{attrs:{name:"payment",title:"待支付"}}),a("van-tab",{attrs:{name:"delivery",title:"待发货"}}),a("van-tab",{attrs:{name:"received",title:"待收货"}}),a("van-tab",{attrs:{name:"comment",title:"待评价"}})],1),t._l(t.list,(function(t){return a("OrderListItem",{key:t.order_id,attrs:{item:t}})}))],2)},i=[],r=(e(8111),e(7588),function(){var t=this,a=t._self._c;return t.item.order_id?a("div",{staticClass:"order-list-item"},[a("div",{staticClass:"tit"},[a("div",{staticClass:"time"},[t._v(t._s(t.item.create_time))]),a("div",{staticClass:"status"},[a("span",[t._v(t._s(t.item.state_text))])])]),a("div",{staticClass:"list"},t._l(t.item.goods,(function(e,s){return a("div",{key:s,staticClass:"list-item"},[a("div",{staticClass:"goods-img"},[a("img",{attrs:{src:e.goods_image,alt:""}})]),a("div",{staticClass:"goods-content text-ellipsis-2"},[t._v(" "+t._s(e.goods_name)+" ")]),a("div",{staticClass:"goods-trade"},[a("p",[t._v("¥ "+t._s(e.total_pay_price))]),a("p",[t._v("x "+t._s(e.total_num))])])])})),0),a("div",{staticClass:"total"},[t._v(" 共 "+t._s(t.item.total_num)+" 件商品，总金额 ¥"+t._s(t.item.total_price)+" ")]),a("div",{staticClass:"actions"},[10===t.item.order_status?a("div",[10===t.item.pay_status?a("span",[t._v("立刻付款")]):10===t.item.delivery_status?a("span",{on:{click:t.cancelOrder}},[t._v("申请取消")]):20===t.item.delivery_status||30===t.item.delivery_status?a("span",[t._v("确认收货")]):t._e()]):t._e(),30===t.item.order_status?a("div",[a("span",[t._v("评价")])]):t._e()])]):t._e()}),n=[],l=e(4180),o={props:{item:{type:Object,default:()=>({})}},methods:{async cancelOrder(){const t=await(0,l.N4)(this.item.order_id);console.log(t)}}},c=o,d=e(1656),_=e(5152),v=e.n(_),m=(0,d.A)(c,r,n,!1,null,"1a3fdd64",null);"function"===typeof v()&&v()(m);var u=m.exports,p={name:"OrderIndex",components:{OrderListItem:u},data(){return{active:this.$route.query.dataType||"all",page:1,list:[]}},methods:{async getOrderList(){const{data:{list:t}}=await(0,l.Nj)(this.active,this.page);t.data.forEach((t=>{t.total_num=0,t.goods.forEach((a=>{t.total_num+=a.total_num}))})),this.list=t.data}},watch:{active:{immediate:!0,handler(){this.getOrderList()}}}},f=p,h=(0,d.A)(f,s,i,!1,null,"2eaa339c",null),g=h.exports},5152:function(){}}]);
//# sourceMappingURL=838.a9eb64c8.js.map
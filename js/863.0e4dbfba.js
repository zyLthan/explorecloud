"use strict";(self["webpackChunkshopping_app"]=self["webpackChunkshopping_app"]||[]).push([[863],{4863:function(s,t,r){r.r(t),r.d(t,{default:function(){return d}});r(4114);var e=function(){var s=this,t=s._self._c;return t("div",{staticClass:"search"},[t("van-nav-bar",{attrs:{fixed:"",title:"商品列表","left-arrow":""},on:{"click-left":function(t){return s.$router.back()}}}),t("van-search",{attrs:{readonly:"",shape:"round",background:"#ffffff",value:s.querySearch,placeholder:"搜索","show-action":""},on:{click:function(t){return s.$router.push("/search")}},scopedSlots:s._u([{key:"action",fn:function(){return[t("van-icon",{staticClass:"tool",attrs:{name:"apps-o"}})]},proxy:!0}])}),t("div",{staticClass:"sort-btns"},[t("div",{staticClass:"sort-item",on:{click:s.sortByCommon}},[s._v("综合")]),t("div",{staticClass:"sort-item",on:{click:s.sortBySales}},[s._v("销量")]),t("div",{staticClass:"sort-item",on:{click:s.sortByPrices}},[s._v(" 价格 "),t("span",{directives:[{name:"show",rawName:"v-show",value:"price"===s.currentSort,expression:"currentSort === 'price'"}]},[s.priceAsc?t("span",[s._v("↑")]):t("span",[s._v("↓")])])])]),t("div",{staticClass:"goods-list"},[s._l(s.searchList,(function(s){return t("GoodsItem",{key:s.goods_id,attrs:{item:s}})})),s._l(s.sortNameList,(function(s){return t("GoodsItem",{key:s.goods_id,attrs:{item:s}})}))],2)],1)},i=[],o=(r(8111),r(2489),r(5933)),a=r(5720);const c=()=>{const{categoryId:s,goodsName:t,page:r}=Object;return a.A.get("/goods/list",{params:{categoryId:s,goodsName:t,page:r}})};var n={name:"searchlistIndex",components:{GoodsItem:o.A},data(){return{page:1,searchList:[],priceAsc:!0,currentSort:"",originalList:[]}},computed:{querySearch(){return this.$route.query.search}},async created(){const{data:{list:s}}=await c({goodsName:this.querySearch,page:this.page}),t=s.data.filter((s=>s.goods_name.includes(this.querySearch)));this.searchList=t,this.originalList=[...t]},methods:{sortBySales(){this.searchList.sort(((s,t)=>t.goods_sales-s.goods_sales)),this.searchList=[...this.searchList],this.currentSort="sales"},sortByPrices(){this.priceAsc?this.searchList.sort(((s,t)=>s.goods_price_min-t.goods_price_min)):this.searchList.sort(((s,t)=>t.goods_price_min-s.goods_price_min)),this.searchList=[...this.searchList],this.priceAsc=!this.priceAsc,this.currentSort="price"},sortByCommon(){this.searchList=[...this.originalList],this.currentSort="common"}}},h=n,u=r(1656),l=(0,u.A)(h,e,i,!1,null,"9d994a72",null),d=l.exports}}]);
//# sourceMappingURL=863.0e4dbfba.js.map